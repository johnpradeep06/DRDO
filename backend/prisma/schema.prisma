generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id           String    @id @default(auto()) @map("_id") @db.ObjectId
  fullName     String
  email        String    @unique
  phoneNumber  String    @unique
  password     String
  role         Role
  jobsPosted   Job[]     @relation("PostedJobs")
  applications Application[]
  createdAt    DateTime  @default(now())
}

enum Role {
  RECRUITER
  CANDIDATE
}

model Job {
  id                String      @id @default(auto()) @map("_id") @db.ObjectId
  recruiter         User        @relation("PostedJobs", fields: [recruiterId], references: [id])
  recruiterId       String
  jobTitle          String
  jobDescription    String
  employmentType    String
  requiredSkills    String
  requiredExperience String
  educationalLevel  String
  contactInfo       String
  location          String
  companyName       String
  salary            String?
  applications      Application[]
  createdAt         DateTime    @default(now())
  updatedAt         DateTime    @updatedAt
}

model Application {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  candidate    User     @relation(fields: [candidateId], references: [id])
  candidateId  String
  job          Job      @relation(fields: [jobId], references: [id])
  jobId        String
  appliedAt    DateTime @default(now())
}
